<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Web漏洞扫描系统</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
        function logout() {
            if (confirm("确定要退出登录吗？")) {
                window.location.href = "{{ url_for('user.logout') }}";
            }
        }
    </script>
</head>
<body>
<div class="dashboard-container">

    <!-- 顶部横条 -->
    <header class="topbar">
        <div class="system-title">Web漏洞扫描系统</div>
        <div class="user-box">
            <div class="avatar-container">
                <img src="{{ url_for('static', filename='avatars/' + (session.avatar or 'avatar.png')) }}" alt="头像" class="avatar">
                <div class="user-tooltip">
                    <p>用户名: {{ session.username }}</p>
                    <p>登录次数: {{ login_count }}</p>
                    <p>最近登录: {{ last_login }}</p>
                    <p>权限等级: {{ '系统管理员' if session.role == 'admin' else '普通用户' }}</p>
                </div>
            </div>
            <span class="username">{{ session.username }}</span>
            <button class="logout-btn" onclick="logout()">退出登录</button>
        </div>
    </header>

    <div class="body-wrapper">
        <!-- 左侧功能导航 -->
        <aside class="sidebar">
            <nav class="nav-menu">
                <a href="{{ url_for('index') }}" class="nav-item">🏠 首页</a>
                <a href="{{ url_for('asset.asset_page') }}" class="nav-item">💼 资产收集</a>
                <a href="{{ url_for('scanner.scanner_home') }}" class="nav-item">🔍 漏洞扫描</a>
                <a href="#" class="nav-item">📄 报告生成</a>
                <a href="#" class="nav-item">📊 数据分析</a>
                <a href="{{ url_for('user.manage_users') }}" class="nav-item">👥 用户管理</a>
            </nav>
        </aside>

        <!-- 内容区域 -->
        <main class="main-panel">
            <section class="data-panel">
                <div class="left-content">
                    <h2>漏洞扫描实时统计</h2>
                    <div class="heatmap-placeholder">实时热力图展示</div>
                    <div class="barchart-placeholder">风险柱状图展示</div>
                </div>

                <div class="right-realtime">
                    <h3>实时扫描进度</h3>
                    <div class="realtime-placeholder">正在实时扫描中...</div>
                </div>
            </section>
        </main>
    </div>

</div>
</body>
</html>